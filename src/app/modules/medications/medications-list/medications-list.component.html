<div class="table-container">
  <table mat-table [dataSource]="dataSource">
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef> Medication</th>
      <td mat-cell *matCellDef="let element"> {{ element.name }}</td>
    </ng-container>

    <ng-container matColumnDef="dosage">
      <th mat-header-cell *matHeaderCellDef> Dosage</th>
      <td mat-cell *matCellDef="let element"> {{ element.dosage }}&nbsp;{{ element?.unit }}</td>
    </ng-container>

    <ng-container matColumnDef="frequency">
      <th mat-header-cell *matHeaderCellDef> Frequency</th>
      <td mat-cell *matCellDef="let element"> {{ element?.days.join(', ') }} at
        @for (t of element?.times; track t; let last = $last) {
          <span>
          {{ t | date: 'HH:mm' }}
            @if (!last) {
              <span>, </span>
            }
        </span>
        }
      </td>
    </ng-container>

    <ng-container matColumnDef="lastUpdated">
      <th mat-header-cell *matHeaderCellDef> Last Updated</th>
      <td mat-cell *matCellDef="let element"> {{ element.lastUpdated | date:'dd MMMM y' }}</td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

    <tr class="mat-row" *matNoDataRow>
      <td class="mat-cell" colspan="4">No data to display!</td>
    </tr>
  </table>

</div>
